<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>草长莺飞 - 听松阁</title>
<style>
*,
*:before,
*:after {
    moz-box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}
html,
body {
    margin: 0;
    height: 100%;
}
html body,
body body {
    background-color: #000;
}
html canvas,
body canvas {
    position: relative;
    z-index: 2;
}
.night-feeling {
    background: rgba(130, 156, 120, 0.56);
    /* Old browsers */
    
    width: 100%;
    height: -webkit-calc(100% - 20px);
    height: calc(100% - 20px);
    position: relative;
    overflow: hidden;
}
.character {
    position: absolute;
    display: inline-block;
}
.character img {
    height: 100%;
    width: auto;
    max-width: 100%;
    display: block;
}
.character.sith {
    bottom: 0;
    right: 0;
    z-index: 3;
    -webkit-transform: translateX(100%);
    -ms-transform: translateX(100%);
    transform: translateX(100%);
    -webkit-transition: all .5s linear;
    transition: all .5s linear;
}
.character.sith .front,
.character.sith .back {
    width: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
}
.character.sith .back {
    position: absolute;
    height: 100%;
    display: block;
    -webkit-transform: rotateY(180deg);
    transform: rotateY(180deg);
}
.character.sith .back img {
    -webkit-transform: scaleX(-1);
    -ms-transform: scaleX(-1);
    transform: scaleX(-1);
}
.character.yoda {
    opacity: 0;
    -webkit-transform: translateX(-100%) translateY(-100%);
    -ms-transform: translateX(-100%) translateY(-100%);
    transform: translateX(-100%) translateY(-100%);
    -webkit-transition: all .5s linear;
    transition: all .5s linear;
}
.scene {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
}
.scene1 .sith {
    -webkit-transform: translateX(-60%);
    -ms-transform: translateX(-60%);
    transform: translateX(-60%);
}
.scene2 .yoda {
    opacity: .5;
    -webkit-transform: translateX(100%) translateY(0);
    -ms-transform: translateX(100%) translateY(0);
    transform: translateX(100%) translateY(0);
    top: auto;
    bottom: 0;
    left: 5%;
}
.scene3 .sith {
    -webkit-transform-style: preserve-3d;
    transform-style: preserve-3d;
    -webkit-animation: miffed-sith 2s 1 forwards;
    animation: miffed-sith 2s 1 forwards;
}
.scene3 .sith .back {
    top: 0;
}
.scene4 .yoda {
    opacity: 0;
}
@-webkit-keyframes miffed-sith {
    0% {
        -webkit-transform: translateX(-60%) translateY(0);
        transform: translateX(-60%) translateY(0);
    }
    25% {
        -webkit-transform: translateX(-60%) translateY(-10%);
        transform: translateX(-60%) translateY(-10%);
    }
    50% {
        -webkit-transform: translateX(-60%) translateY(-10%) rotateY(0);
        transform: translateX(-60%) translateY(-10%) rotateY(0);
    }
    75% {
        -webkit-transform: translateX(-60%) translateY(0) rotateY(180deg);
        transform: translateX(-60%) translateY(0) rotateY(180deg);
    }
    100% {
        -webkit-transform: translateX(100%) rotateY(180deg);
        transform: translateX(100%) rotateY(180deg);
    }
}
@keyframes miffed-sith {
    0% {
        -webkit-transform: translateX(-60%) translateY(0);
        transform: translateX(-60%) translateY(0);
    }
    25% {
        -webkit-transform: translateX(-60%) translateY(-10%);
        transform: translateX(-60%) translateY(-10%);
    }
    50% {
        -webkit-transform: translateX(-60%) translateY(-10%) rotateY(0);
        transform: translateX(-60%) translateY(-10%) rotateY(0);
    }
    75% {
        -webkit-transform: translateX(-60%) translateY(0) rotateY(180deg);
        transform: translateX(-60%) translateY(0) rotateY(180deg);
    }
    100% {
        -webkit-transform: translateX(100%) rotateY(180deg);
        transform: translateX(100%) rotateY(180deg);
    }
}
</style>
</head>


<!-- 代码 开始 -->
<div class="fish" style="position:absolute; width:1350px; height:500px; z-index:99; left: 20px; top: 10px;backgroud-color:000;">
<table>
	
	<!-- 第1行 -->
    <tr>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="folder" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/folder.gif" width="50" height="50" border="0" id="index_r2_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://photo.444.info/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/pictures.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://vip.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="vip" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/vip.gif" width="50" height="50" border="0" id="index_r2_c6" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://kylehao.ys168.com/" target="_blank"><img name="share" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/share.gif" width="50" height="50" border="0" id="index_r5_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://free.444.info/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="free" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/free.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td></td>
    </tr>
    <tr>
     <td align="center" width="60">我的文档</td>
     <td width="20"></td>
     <td align="center" width="60">我的相册</td>
     <td width="20"></td>
     <td align="center" width="60">视频解析</td>
     <td width="20"></td>
     <td align="center" width="60">文件分享</td>
     <td width="20"></td>
     <td align="center" width="60">免费空间</td>
     <td width="20"></td>
     <td align="center"></td>
    </tr>
    <tr>
     <td>&nbsp;</td>
    </tr>
    
<!-- 第2行 -->   
    <tr>
     <td align="center" width="60"><a href="http://pan.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="computer" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/computer.gif" width="50" height="50" border="0" id="index_r5_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://movie.2345.ltd/" target="_blank"><img name="movie" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/movie.gif" width="50" height="50" border="0" id="index_r5_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://www.free163.com/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="poem" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/poem.gif" width="50" height="50" border="0" id="index_r5_c6" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E5%BE%B7%E4%BA%91%E7%A4%BE/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="dys" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/dys.gif" width="50" height="50" border="0" id="index_r5_c6" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E5%94%AF%E7%BE%8E%E7%BA%AF%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/wmcyy.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td width="20"></td>
     <td width="60"></td>
     <td width="20"></td>
     <td width="60"></td>
    </tr>
    <tr>
     <td align="center" width="60">我的电脑</td>
     <td width="20"></td>
     <td align="center" width="60">我的电影</td>
     <td width="20"></td>
     <td align="center" width="60">古典诗词</td>
     <td width="20"></td>
     <td align="center" width="60">德云社</td>
     <td width="20"></td>
     <td align="center" width="60">唯美音乐</td>
     <td width="20"></td>
     <td align="center"></td>
     <td width="20"></td>
     <td align="center"></td>
    </tr>
    <tr>
     <td>&nbsp;</td>
    </tr>
    
<!-- 第3行 -->
    <tr>
     <td align="center" width="60"><a href="https://git.64.gs/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="network" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/network.gif" width="50" height="50" border="0" id="index_r8_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://book.2345.ltd/" target="_blank"><img name="book" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/book.gif" width="50" height="50" border="0" id="index_r8_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://www.book.ga/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="wuxia" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/wuxia.gif" width="50" height="50" border="0" id="index_r8_c6" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E7%BA%AF%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="qyy" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/qyy.gif" width="50" height="50" border="0" id="index_r8_c6" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E6%B2%BB%E6%84%88%E7%B3%BB%E6%94%BE%E7%A9%BA%E8%88%92%E7%BC%93%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/zyxyy.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td></td>
     <td width="20"></td>
     <td></td>
    </tr>
    <tr>
     <td align="center" width="60">我的网络</td>
     <td width="20"></td>
     <td align="center" width="60">我的图书</td>
     <td width="20"></td>
     <td align="center" width="60">武侠小说</td>
     <td width="20"></td>
     <td align="center" width="60">轻音乐</td>
     <td width="20"></td>
     <td align="center" width="60">治愈音乐</td>
     <td width="20"></td>
     <td align="center"></td>
     <td width="20"></td>
     <td align="center"></td>
    </tr>
    <tr>
     <td>&nbsp;</td>
    </tr>
    
<!-- 第4行 -->
    <tr>
     <td align="center" align="center" width="60"><a href="https://dwz.64.gs/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=300" class="lightbox"><img name="index_r11_c2" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/ie.gif" width="50" height="50" border="0" id="index_r11_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://blog.444.info/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="blog" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/blog.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://pan.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="free" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/189.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E5%9B%BD%E8%AF%AD%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="lxyy" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/lxyy.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.2345.ltd/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E8%87%AA%E7%84%B6%E4%B9%8B%E5%A3%B0/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/zrzs.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td width="20"></td>
     <td></td>
     <td width="20"></td>
    <td></td>
    </tr>
   <tr>
    <td align="center" width="60">短网址</td>
    <td width="20"></td>
    <td align="center" width="60">我的博客</td>
    <td width="20"></td>
    <td align="center" width="60">天翼云盘</td>
    <td width="20"></td>
    <td align="center" width="60">流行音乐</td>
    <td width="20"></td>
    <td align="center" width="60">自然之声</td>
    <td width="20"></td>
    <td align="center"></td>
    <td width="20"></td>
    <td align="center"></td>
   </tr>
   <tr>
    <td >&nbsp;</td>
   </tr>
<!-- 第5行 -->
    <tr>
     <td align="center" width="60"><a href="http://cloud.444.info/OnedriveTJ/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="index_r11_c2" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/ljt.gif" width="50" height="50" border="0" id="index_r11_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://mail.pu.cx/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="mail" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/mail.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://alist.444.info?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="aliyun" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/aliyun.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://game.444.info/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="game" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/game.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.444.info/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E9%9F%A9%E5%9B%BD%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/korea.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td width="20"></td>
     <td></td>
     <td width="20"></td>
    <td></td>
    </tr>
   <tr>
    <td align="center" width="60">回收站</td>
    <td width="20"></td>
    <td align="center" width="60">我的邮局</td>
    <td width="20"></td>
    <td align="center" width="60">阿里云盘</td>
    <td width="20"></td>
    <td align="center" width="60">我的游戏</td>
    <td width="20"></td>
    <td align="center" width="60">韩国音乐</td>
    <td width="20"></td>
    <td align="center"></td>
    <td width="20"></td>
    <td align="center"></td>
   </tr>
   <tr>
    <td >&nbsp;</td>
   </tr>
<!-- 第6行 -->
    <tr>
     <td align="center" width="60"><a href="http://www.mp4.run/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=550" class="lightbox"><img name="music" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/music.gif" width="50" height="50" border="0" id="index_r11_c2" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://down.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="down" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/down.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.444.info/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E6%97%A5%E6%9C%AC%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="free" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/japan.gif" width="50" height="50" border="0" id="index_r11_c4" alt="" /></a></td>
     <td width="20"></td>
     <td align="center" width="60"><a href="http://cloud.444.info/OnedriveTJ/%E9%9F%B3%E4%B9%90%E8%A7%86%E5%90%AC/%E6%AC%A7%E7%BE%8E%E9%9F%B3%E4%B9%90/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img name="pictures" src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/usa.gif" width="50" height="50" border="0" id="index_r2_c4" alt="" /></a></td>
     <td width="20"></td>
     <td></td>
     <td width="20"></td>
    <td></td>
    </tr>
   <tr>
    <td align="center" width="60">我的音乐</td>
    <td width="20"></td>
    <td align="center" width="60">软件下载</td>
    <td width="20"></td>
    <td align="center" width="60">日本音乐</td>
    <td width="20"></td>
    <td align="center" width="60">欧美音乐</td>
    <td width="20"></td>
    <td align="center"></td>
    <td width="20"></td>
    <td align="center"></td>
   </tr>
   <tr>
    <td >&nbsp;</td>
   </tr>
  </table>
</div>





<!-- 底部和按钮 -->
<div class="fish" style="position:absolute; width:1365; height:39; z-index:97; left: 0px; bottom: -3px;backgroud-color:000;">
<img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_images/bottom.jpg" width="1366" height="39" border="0" alt="">

</div>

<div class="fish" style="position:absolute; width:50; height:50; z-index:98; left: 0px; bottom: -3px;backgroud-color:000;">
<table>
	<tr>
		<td><a href="http://www.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="40" height="50" border="0" alt=""></a></td>
		<td width="20">&nbsp;</td>
		<td><a href="http://cloud.2345.ltd/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="40" height="50" border="0" alt=""></a></td>
		<td width="1050">&nbsp;</td>
		<td><a href="http://wx.qq.com/?lightbox[iframe]=true&lightbox[width]=800&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="15" height="50" border="0" alt=""></a></td>
		<td width="10">&nbsp;</td>
		<td><a href="http://www.360.cn/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="15" height="50" border="0" alt=""></a></td>
		<td width="7">&nbsp;</td>
		<td><a href="http://mp3.2345.ltd/lx/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="15" height="50" border="0" alt=""></a></td>
		<td width="6">&nbsp;</td>
		<td><a href="http://mp3.2345.ltd/dys/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="15" height="50" border="0" alt=""></a></td>
		<td width="4">&nbsp;</td>
		<td><a href="http://mp3.2345.ltd/qyy/?lightbox[iframe]=true&lightbox[width]=1200&lightbox[height]=540" class="lightbox"><img src="https://cdn.jsdelivr.net/gh/kylehao/public@master/desktop_computer/space.gif" width="15" height="50" border="0" alt=""></a></td>
		
			
	</tr>
</table>
</div>

</div>
<!-- 代码 结束 -->


<section class="night-feeling">
    <div class="scene">
        <div class="character yoda">
        </div>
        <div class="character sith">
            <div class="front">
            </div>
            <div class="back">
            </div>
        </div>
    </div>
    <canvas id="grass"></canvas>
</section>
<script src="js/jquery-1.11.1.min.js"></script>
<script>
(function($, root, undefined, w) {
    'use strict';
    var count = 1;

    $(document).on('ready', function() {
        $(window).on('keyup', function(e) {
            if (e.which === 32 && count < 6) {
                $('.scene').addClass('scene' + count);
                count++;
            }

            if (count === 6) {
                $('.scene').removeClass().addClass('scene');
                count = 1;
            }
        })
    });

})(jQuery, this);

/**
 * Original version for canvas http://labs.hyperandroid.com/js1k
 */
(function() {
    Grass = function() {
        return this;
    };

    Grass.prototype = {


        alto_hierba: 0, // grass height
        maxAngle: 0, // maximum grass rotation angle (wind movement)
        angle: 0, // construction angle. thus, every grass is different to others  
        coords: null, // quadric bezier curves coordinates
        color: null, // grass color. modified by ambient component.
        offset_control_point: 3, // grass base width. greater values, wider at the basement.

        initialize: function(canvasWidth, canvasHeight, minHeight, maxHeight, angleMax, initialMaxAngle) {

            // grass start position
            var sx = Math.floor(Math.random() * canvasWidth);
            var sy = canvasHeight;

            // quadric curve middle control point. higher values means wider grass from base to peak.
            // try offset_control_x=10 for thicker grass.
            var offset_control_x = 1.5;

            this.alto_hierba = minHeight + Math.random() * maxHeight;
            this.maxAngle = 10 + Math.random() * angleMax;
            this.angle = Math.random() * initialMaxAngle * (Math.random() < 0.5 ? 1 : -1) * Math.PI / 180;

            // hand crafted value. modify offset_control_x to play with grass curvature slope.
            var csx = sx - offset_control_x;

            // grass curvature. greater values make grass bender. 
            // try with:  
            //        var csy= sy-this.alto_hierba;  -> much more bended grass.
            //        var csy= sy-1;                 -> totally unbended grass.
            //        var csy= sy-this.alto_hierba/2;-> original. good looking grass.
            var csy = 0;
            if (Math.random() < 0.1) {
                csy = sy - this.alto_hierba;
            } else {
                csy = sy - this.alto_hierba / 2;
            }

            /**
       I determined that both bezier curves that conform each grass should have
       the same middle control point to be parallel.
       You can play with psx/psy adding or removing values to slightly modify grass
       geometry.
      **/
            var psx = csx;
            // changed var psy= csy; to
            var psy = csy - offset_control_x;

            // the bigger offset_control_point, the wider on its basement.
            this.offset_control_point = 3;
            var dx = sx + this.offset_control_point;
            var dy = sy;

            this.coords = [sx, sy, csx, csy, psx, psy, dx, dy];

            // grass color.
            this.color = [16 + Math.floor(Math.random() * 32),
                100 + Math.floor(Math.random() * 155),
                16 + Math.floor(Math.random() * 32)
            ];

        },

        /**
         * paint every grass.
         * @param ctx is the canvas2drendering context
         * @param time for grass animation.
         * @param ambient parameter to dim or brighten every grass.
         * @returns nothing
         */
        paint: function(ctx, time, ambient) {

            ctx.save();

            // grass peak position. how much to rotate the peak.
            // less values (ie the .0005), will make as if there were a softer wind.
            var inc_punta_hierba = Math.sin(time * 0.0005);

            // rotate the point, so grass curves are modified accordingly. If just moved horizontally, the curbe would
            // end by being unstable with undesired visuals. 
            var ang = this.angle + Math.PI / 2 + inc_punta_hierba * Math.PI / 180 * (this.maxAngle * Math.cos(time * 0.0002));
            var px = this.coords[0] + this.offset_control_point + this.alto_hierba * Math.cos(ang);
            var py = this.coords[1] - this.alto_hierba * Math.sin(ang);

            var c = this.coords;

            ctx.beginPath();
            ctx.moveTo(c[0], c[1]);
            ctx.bezierCurveTo(c[0], c[1], c[2], c[3], px, py);
            ctx.bezierCurveTo(px, py, c[4], c[5], c[6], c[7]);
            ctx.closePath();
            ctx.fillStyle = 'rgb(' +
                Math.floor(this.color[0] * ambient) + ',' +
                Math.floor(this.color[1] * ambient) + ',' +
                Math.floor(this.color[2] * ambient) + ')';
            ctx.fill();

            ctx.restore();

        }
    };
})();

(function() {
    Garden = function() {
        return this;
    };

    Garden.prototype = {
        grass: null,
        ambient: 1,
        stars: null,
        firefly_radius: 10,
        num_fireflyes: 40,
        num_stars: 512,
        width: 0,
        height: 0,

        initialize: function(width, height, size) {
            this.width = width;
            this.height = height;
            this.grass = [];

            for (var i = 0; i < size; i++) {
                var g = new Grass();
                g.initialize(
                    width,
                    height,
                    50, // min grass height 
                    height / 10, // max grass height
                    20, // grass max initial random angle 
                    40 // max random angle for animation 
                );
                this.grass.push(g);
            }

            this.stars = [];
            for (i = 0; i < this.num_stars; i++) {
                this.stars.push(Math.floor(Math.random() * (width - 10) + 5));
                this.stars.push(Math.floor(Math.random() * (height - 10) + 5));
            }
        },

        paint: function(ctx, time) {
            ctx.save();

            // draw stars if ambient below .3 -> night
            if (this.ambient < 0.3) {

                // modify stars translucency by ambient (as transitioning to day, make them dissapear).
                ctx.globalAlpha = 1 - ((this.ambient - 0.05) / 0.25);

                // as well as making them dimmer
                intensity = 1 - (this.ambient / 2 - 0.05) / 0.25;

                // how white do you want the stars to be ??
                var c = Math.floor(192 * intensity);
                var strc = 'rgb(' + c + ',' + c + ',' + c + ')';
                ctx.strokeStyle = strc;

                // first num_fireflyes coordinates are fireflyes themshelves.
                for (var j = this.num_fireflyes * 2; j < this.stars.length; j += 2) {
                    var inc = 1;

                    // every one out of 3 stars move at 1.5 increment
                    if (j % 3 === 0) {
                        inc = 1.5;
                    } else if (j % 11 === 0) {
                        // every one out of 11 stars move at 2.5 increment
                        inc = 2.5;
                    }
                    // all the others at increment 1
                    this.stars[j] = (this.stars[j] + 0.1 * inc) % canvas.width;

                    var y = this.stars[j + 1];
                    ctx.strokeRect(this.stars[j], this.stars[j + 1], 1, 1);

                }
            }

            ctx.globalAlpha = 1;

            var i;
            // draw fireflyes
            ctx.fillStyle = '#ffff00';
            for (i = 0; i < this.num_fireflyes * 2; i += 2) {
                var angle = Math.PI * 2 * Math.sin(time * 3E-4) + i * Math.PI / 50;
                var radius = this.firefly_radius * Math.cos(time * 3E-4);
                ctx.fillRect(
                    this.width / 2 +
                    0.5 * this.stars[i] +
                    150 * Math.cos(time * 3E-4) * Math.sin(time * 0.00001 * i) + // move horizontally with time 
                    radius * Math.cos(angle),

                    this.height / 2 +
                    0.5 * this.stars[i + 1] +
                    20 * Math.sin(time * 3E-4) * 5 * Math.cos(time * 0.00001 * i) + // move vertically with time 
                    radius * Math.sin(angle),

                    3,
                    3);
            }


            for (i = 0; i < this.grass.length; i++) {
                this.grass[i].paint(ctx, time, this.ambient);
            }
            ctx.restore();
        }
    };
})();


function _doit() {

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    var ntime = new Date().getTime();
    var elapsed = ntime - time;
    garden.paint(ctx, elapsed);
}

/**
 * sky colors
 * @param time current time
 * @param last how much time to take fading colors
 */
function lerp() {
    gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);

    var i0 = lerpindex % colors.length;
    var i1 = (lerpindex + 1) % colors.length;

    for (var i = 0; i < 4; i++) {
        var rgb = 'rgb(';
        for (var j = 0; j < 3; j++) {
            rgb += Math.floor((colors[i1][i * 3 + j] - colors[i0][i * 3 + j]) + colors[i0][i * 3 + j]);
            if (j < 2) rgb += ',';
        }
        rgb += ')';
        gradient.addColorStop(i / 3, rgb);

    }

    garden.ambient = (ambients[i1] - ambients[i0]) + ambients[i0];
}

var interval = null;
var canvas = null;
var ctx = null;
var garden = null;
var container = null;

var gradient;
var time;

function init(images) {

    canvas = document.getElementById('grass');
    ctx = canvas.getContext('2d');

    container = document.querySelector('.night-feeling');

    canvas.width = container.offsetWidth;
    canvas.height = container.offsetHeight;

    garden = new Garden();
    garden.initialize(canvas.width, canvas.height, 500);

    lerp();

    time = new Date().getTime();
    interval = setInterval(_doit, 30);
}

// sky colors
colors = [
    [0x00, 0x00, 0x00,
        0x00, 0x2f, 0x7f,
        0x00, 0x28, 0x50,
        0x00, 0x1f, 0x3f
    ]
];

// ambient intensities for each sky color
ambients = [0.05];

// start with this sky index.
lerpindex = 0;

window.addEventListener(
    'load',
    init(null),
    false);
</script>
</body>
</html>